<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from target/docs-site/markdown/developers/infrastrcture/configure_maven.md at 2022-09-21

 | Rendered using Apache Maven Default Skin
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Typr &#x2013; Configure Maven</title>
    <link rel="stylesheet" href="../../css/maven-base.css" />
    <link rel="stylesheet" href="../../css/maven-theme.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />
  </head>
  <body class="composite">
    <div id="banner">
<div id="bannerLeft">Typr
</div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 2022-09-21</span>
           | <span id="projectVersion">Version: 0.0.1-SNAPSHOT</span>
      </div>
      <div class="xright"><a href="../.././" title="Typr">Typr</a>      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>Parent Project</h5>
    <ul>
     <li class="none"><a href="../../../index.html" title="Pallas Systems">Pallas Systems</a></li>
    </ul>
       <h5>Modules</h5>
    <ul>
     <li class="none"><a href="../../core/index.html" title="core">core</a></li>
     <li class="none"><a href="../../hibernate/index.html" title="hibernate">hibernate</a></li>
     <li class="none"><a href="../../runnable/index.html" title="runnable">runnable</a></li>
     <li class="none"><a href="../../rest/index.html" title="rest">rest</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="../../project-info.html" title="Project Information">Project Information</a></li>
     <li class="collapsed"><a href="../../project-reports.html" title="Project Reports">Project Reports</a></li>
    </ul>
      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
<h1>Configure Maven</h1>
<p>This section will walk you though how to configure and secure Apache Maven.</p><section>
<h2><a name="Pre-requisites"></a>Pre-requisites</h2>
<ul>

<li><a href="install_maven.html">Install Maven</a></li>
</ul></section><section>
<h2><a name="Password_Encryption"></a>Password Encryption</h2>
<p>Maven supports server password encryption. We will use this to ensure the password token is not exposed if the device is compromised.</p><section>
<h3><a name="How_to_create_a_master_password"></a>How to create a master password</h3>
<p>Use the following command line:</p>

<div class="source">
<pre><code class="language-bash">mvn --encrypt-master-password
</code></pre></div>
<p>Maven should request your &#x2018;master&#x2019; password, this can be anything unique and is used as a salt to encrypt your other passwords. This command will produce an encrypted version of the password, something like</p>

<div class="source">
<pre><code class="language-bash">{jSMOWnoPFgsHVpMvz5VrIt5kRbzGpI8u+9EF1iFQyJQ=}
</code></pre></div>
<p>Store this password in the <code>/home/stevecrocker/.m2/settings-security.xml</code> it should look like</p>

<div class="source">
<pre><code class="language-xml">&lt;settingsSecurity&gt;
  &lt;master&gt;{jSMOWnoPFgsHVpMvz5VrIt5kRbzGpI8u+9EF1iFQyJQ=}&lt;/master&gt;
&lt;/settingsSecurity&gt;
</code></pre></div>
<p>When this is done, you can start encrypting existing server passwords.</p></section><section>
<h3><a name="Deploy_GitHub_M2_Settings_file."></a>Deploy GitHub M2 Settings file.</h3>
<p>Each project contains github actions which reference a <a href="../../../.github/maven_settings.xml">M2 Settings file</a>. This file is used so the build system knows where to to look for project dependencies. Copy this file to <code>/home/stevecrocker/.m2/settings.xml</code>. Github actions injects usernames and passwords as environment variables. The server section:</p>

<div class="source">
<pre><code class="language-xml">&lt;server&gt;
  &lt;id&gt;github&lt;/id&gt;
  &lt;username&gt;${env.GITHUB_USER}&lt;/username&gt;
  &lt;password&gt;${env.GITHUB_TOKEN}&lt;/password&gt;
&lt;/server&gt;
</code></pre></div>
<p>Needs to be updated with your credentials. All instances of<code>${env.GITHUB_USER}</code> should be replaced with your GitHub Username. Next we need to generate a Personal Access Token so it can be encrypted and stored.</p></section><section>
<h3><a name="Creating_a_personal_access_token"></a>Creating a personal access token</h3>
<p>Personal access tokens (PATs) are an alternative to using passwords for authentication to GitHub when using the GitHub API or the command line.</p>
<ul>

<li>In a web browser open <a class="externalLink" href="https://www.github.com">GitHub</a></li>
<li>On GitHub verify your email address, if it hasn't been verified yet.</li>
<li>In the upper-right corner of any page, click your profile photo, then click Settings. Settings icon in the user bar</li>
<li>In the left sidebar, click Developer settings. Developer settings</li>
<li>In the left sidebar, click Personal access tokens. Personal access tokens</li>
<li>Click Generate new token. Generate new token button</li>
<li>Give your token a descriptive name. Token description field</li>
<li>To give your token an expiration, select the Expiration drop-down menu, then click a default or use the calendar picker. Token expiration field</li>
<li>Select the scopes, or permissions, you'd like to grant this token. To use your token to access repositories from the command line, select repo.</li>
<li>Click Generate token.</li>
</ul>
<p>Make note of the token we will encrypt it in the next step and it is not shown again.</p></section><section>
<h3><a name="How_to_encrypt_server_passwords"></a>How to encrypt server passwords</h3>
<p>Now we have a personal access token we can use as a password we need to encrypt it to use on the device. This is achieved using the following command:</p>

<div class="source">
<pre><code class="language-bash">mvn --encrypt-password
</code></pre></div>
<p>A dialog will appear asking for the password, please use the personal access token value. This command produces an encrypted version of it, something like</p>

<div class="source">
<pre><code>{COQLCE6DU6GtcS5P=}
</code></pre></div>
<p>Within your M2 Settings file <code>/home/stevecrocker/.m2/settings.xml</code> you will find a number of server elements like the following:</p>

<div class="source">
<pre><code class="language-xml">&lt;server&gt;
  &lt;id&gt;github&lt;/id&gt;
  &lt;username&gt;${env.GITHUB_USER}&lt;/username&gt;
  &lt;password&gt;${env.GITHUB_TOKEN}&lt;/password&gt;
&lt;/server&gt;
</code></pre></div>
<p>Replace all instances of <code>${env.GITHUB_TOKEN}</code> with the encrypted password you generated in the previous steps.</p></section></section>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2022<a href="https://www.pallas.uk">Pallas Systems</a>.
.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>