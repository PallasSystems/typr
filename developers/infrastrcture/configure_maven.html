<!DOCTYPE html>
<!doctype html>
<html lang="en" class="h-100">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="generator" content="#generatedBy()" />
    <title>Typr &#x2013; Configure Maven</title>
    <link rel="icon" href="../../img/favicons/favicon.ico">
    <!-- CSS Stylesheets, site.css is included so downstream projects can override them as appropriate. -->
    <link rel="stylesheet" href="../../css/bootstrap.min.css" />
    <link rel="stylesheet" href="../../css/bootstrap-icons.css" />
    <link rel="stylesheet" href="../../css/maven-base.css" />
    <link rel="stylesheet" href="../../css/prettify.css" />
    <link rel="stylesheet" href="../../css/maven-theme.css" />
    <link rel="stylesheet" href="../../css/site.css" />
  </head>
  <body class="d-flex flex-column h-100">

    <header>
      <nav class="navbar navbar-expand-md navbar-dark bg-dark">
        <div id="projectBarContainer" class="container-fluid">
<a href="$href" id="navbarIconLink" title="SUPER POM to simplify development of Maven based projects for Freeman." class="navbar-brand text-wrap ps-2"><img id="navbarIconImg" src="../.././images/pallas-image.png"  alt="SUPER POM to simplify development of Maven based projects for Freeman."  title="Navbar Brand Icon" width="32px" height="32px" />          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div id="navbarCollapse" class="collapse navbar-collapse justify-content-end">
            <ul id="navbarList" class="navbar-nav">
             <li class="nav-item dropdown">
               <a class="nav-link dropdown-toggle" href="#" id="Parent ProjectMenuDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Parent Project <b class="caret"></b></a>
               <ul class="dropdown-menu" aria-labelledby="Parent ProjectMenuDropdown">
                 <li class="nav-item dropdown-item" id="Pallas SystemsDropdown"><a href="$href" title="Pallas Systems" class="dropdown-item" >Pallas Systems</a></li>
               </ul>
             </li>
             <li class="nav-item dropdown">
               <a class="nav-link dropdown-toggle" href="#" id="OverviewMenuDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Overview <b class="caret"></b></a>
               <ul class="dropdown-menu" aria-labelledby="OverviewMenuDropdown">
                 <li class="nav-item dropdown-item" id="WelcomeDropdown"><a href="$href" title="Welcome" class="dropdown-item" >Welcome</a></li>
                 <li class="nav-item dropdown-item" id="Getting StartedDropdown"><a href="$href" title="Getting Started" class="dropdown-item" >Getting Started</a></li>
                 <li class="nav-item dropdown-item" id="FAQDropdown"><a href="$href" title="FAQ" class="dropdown-item" >FAQ</a></li>
               </ul>
             </li>
             <li class="nav-item dropdown">
               <a class="nav-link dropdown-toggle" href="#" id="DocumentationMenuDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Documentation <b class="caret"></b></a>
               <ul class="dropdown-menu" aria-labelledby="DocumentationMenuDropdown">
                 <li class="nav-item dropdown-item" id="User GuideDropdown"><a href="$href" title="User Guide" class="dropdown-item" >User Guide</a></li>
                 <li class="nav-item dropdown-item dropdown-submenu">
                   <a href="$href" title="Developer Guide" class="dropdown-item" >Developer Guide</a>
                   <ul id="DocumentationMenuSubMenuDropdown" class="dropdown-menu submenu">
                     <li class="nav-item dropdown-item"><a href="$href" title="Building Software Project" class="dropdown-item" >Building Software Project</a></li>
                   </ul>
                 </li>
               </ul>
             </li>
             <li class="nav-item dropdown">
               <a class="nav-link dropdown-toggle" href="#" id="DevelopersMenuDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Developers <b class="caret"></b></a>
               <ul class="dropdown-menu" aria-labelledby="DevelopersMenuDropdown">
                 <li class="nav-item dropdown-item" id="BuildingDropdown"><a href="$href" title="Building" class="dropdown-item" >Building</a></li>
                 <li class="nav-item dropdown-item" id="ReleaseDropdown"><a href="$href" title="Release" class="dropdown-item" >Release</a></li>
                 <li class="nav-item dropdown-item" id="Development ProcessDropdown"><a href="$href" title="Development Process" class="dropdown-item" >Development Process</a></li>
                 <li class="nav-item dropdown-item" id="Release ManagementDropdown"><a href="$href" title="Release Management" class="dropdown-item" >Release Management</a></li>
               </ul>
             </li>
             <li class="nav-item dropdown">
               <a class="nav-link dropdown-toggle" href="#" id="ModulesMenuDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Modules <b class="caret"></b></a>
               <ul class="dropdown-menu" aria-labelledby="ModulesMenuDropdown">
                 <li class="nav-item dropdown-item" id="coreDropdown"><a href="$href" title="core" class="dropdown-item" >core</a></li>
                 <li class="nav-item dropdown-item" id="hibernateDropdown"><a href="$href" title="hibernate" class="dropdown-item" >hibernate</a></li>
                 <li class="nav-item dropdown-item" id="runnableDropdown"><a href="$href" title="runnable" class="dropdown-item" >runnable</a></li>
                 <li class="nav-item dropdown-item" id="restDropdown"><a href="$href" title="rest" class="dropdown-item" >rest</a></li>
               </ul>
             </li>
             <li class="nav-item dropdown">
               <a class="nav-link dropdown-toggle" href="#" id="Project DocumentationMenuDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Project Documentation <b class="caret"></b></a>
               <ul class="dropdown-menu" aria-labelledby="Project DocumentationMenuDropdown">
                 <li class="nav-item dropdown-item dropdown-submenu">
                   <a href="$href" title="Project Information" class="dropdown-item" >Project Information</a>
                   <ul id="Project DocumentationMenuSubMenuDropdown" class="dropdown-menu submenu">
                     <li class="nav-item dropdown-item"><a href="$href" title="CI Management" class="dropdown-item" >CI Management</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="Dependency Convergence" class="dropdown-item" >Dependency Convergence</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="Dependency Information" class="dropdown-item" >Dependency Information</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="Dependency Management" class="dropdown-item" >Dependency Management</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="Distribution Management" class="dropdown-item" >Distribution Management</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="About" class="dropdown-item" >About</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="Issue Management" class="dropdown-item" >Issue Management</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="Licenses" class="dropdown-item" >Licenses</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="Project Modules" class="dropdown-item" >Project Modules</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="Plugin Management" class="dropdown-item" >Plugin Management</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="Plugins" class="dropdown-item" >Plugins</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="Source Code Management" class="dropdown-item" >Source Code Management</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="Summary" class="dropdown-item" >Summary</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="Team" class="dropdown-item" >Team</a></li>
                   </ul>
                 </li>
                 <li class="nav-item dropdown-item dropdown-submenu">
                   <a href="$href" title="Project Reports" class="dropdown-item" >Project Reports</a>
                   <ul id="Project DocumentationMenuSubMenuDropdown" class="dropdown-menu submenu">
                     <li class="nav-item dropdown-item"><a href="$href" title="CPD" class="dropdown-item" >CPD</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="PMD" class="dropdown-item" >PMD</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="JaCoCo Aggregate" class="dropdown-item" >JaCoCo Aggregate</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="Change Log" class="dropdown-item" >Change Log</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="File Activity" class="dropdown-item" >File Activity</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="Developer Activity" class="dropdown-item" >Developer Activity</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="Source Xref" class="dropdown-item" >Source Xref</a></li>
                     <li class="nav-item dropdown-item"><a href="$href" title="Surefire Report" class="dropdown-item" >Surefire Report</a></li>
                   </ul>
                 </li>
               </ul>
             </li>
            </ul>
          </div>
        </div>
      </nav>
      <nav id="projectBar" class="navbar py-0 navbar-dark bg-dark" aria-label="projectBarList">
        <div id="projectBarContainer" class="container-fluid">
          <div id="breadcrumbSpacer"  class="col justify-content-start"></div>
          <div id="projectBaDateVersionContainer" class="justify-content-end">
          </div>
        </div>
      </nav>
    </header>

    <main class="flex-shrink-0 h-100" role="main">
      <div class="container rounded">
<section>
<h1>Configure Maven</h1>
<p>This section will walk you though how to configure and secure Apache Maven.</p><section>
<h2>Pre-requisites</h2>
<ul>

<li><a href="install_maven.html">Install Maven</a></li>
</ul></section><section>
<h2>Password Encryption</h2>
<p>Maven supports server password encryption. We will use this to ensure the password token is not exposed if the device is compromised.</p><section>
<h3>How to create a master password</h3>
<p>Use the following command line:</p>

<div class="source"><pre class=" prettyprint linenums"><code class="language-bash">mvn --encrypt-master-password
</code></pre></div>
<p>Maven should request your &#x2018;master&#x2019; password, this can be anything unique and is used as a salt to encrypt your other passwords. This command will produce an encrypted version of the password, something like</p>

<div class="source"><pre class=" prettyprint linenums"><code class="language-bash">{jSMOWnoPFgsHVpMvz5VrIt5kRbzGpI8u+9EF1iFQyJQ=}
</code></pre></div>
<p>Store this password in the <code>/home/runner/.m2/settings-security.xml</code> it should look like</p>

<div class="source"><pre class=" prettyprint linenums"><code class="language-xml">&lt;settingsSecurity&gt;
  &lt;master&gt;{jSMOWnoPFgsHVpMvz5VrIt5kRbzGpI8u+9EF1iFQyJQ=}&lt;/master&gt;
&lt;/settingsSecurity&gt;
</code></pre></div>
<p>When this is done, you can start encrypting existing server passwords.</p></section><section>
<h3>Deploy GitHub M2 Settings file.</h3>
<p>Each project contains github actions which reference a <a href="../../../.github/maven_settings.xml">M2 Settings file</a>. This file is used so the build system knows where to to look for project dependencies. Copy this file to <code>/home/runner/.m2/settings.xml</code>. Github actions injects usernames and passwords as environment variables. The server section:</p>

<div class="source"><pre class=" prettyprint linenums"><code class="language-xml">&lt;server&gt;
  &lt;id&gt;github&lt;/id&gt;
  &lt;username&gt;pallasCI&lt;/username&gt;
  &lt;password&gt;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&lt;/password&gt;
&lt;/server&gt;
</code></pre></div>
<p>Needs to be updated with your credentials. All instances of<code>pallasCI</code> should be replaced with your GitHub Username. Next we need to generate a Personal Access Token so it can be encrypted and stored.</p></section><section>
<h3>Creating a personal access token</h3>
<p>Personal access tokens (PATs) are an alternative to using passwords for authentication to GitHub when using the GitHub API or the command line.</p>
<ul>

<li>In a web browser open <a href="https://www.github.com" class="externalLink">GitHub</a></li>
<li>On GitHub verify your email address, if it hasn't been verified yet.</li>
<li>In the upper-right corner of any page, click your profile photo, then click Settings. Settings icon in the user bar</li>
<li>In the left sidebar, click Developer settings. Developer settings</li>
<li>In the left sidebar, click Personal access tokens. Personal access tokens</li>
<li>Click Generate new token. Generate new token button</li>
<li>Give your token a descriptive name. Token description field</li>
<li>To give your token an expiration, select the Expiration drop-down menu, then click a default or use the calendar picker. Token expiration field</li>
<li>Select the scopes, or permissions, you'd like to grant this token. To use your token to access repositories from the command line, select repo.</li>
<li>Click Generate token.</li>
</ul>
<p>Make note of the token we will encrypt it in the next step and it is not shown again.</p></section><section>
<h3>How to encrypt server passwords</h3>
<p>Now we have a personal access token we can use as a password we need to encrypt it to use on the device. This is achieved using the following command:</p>

<div class="source"><pre class=" prettyprint linenums"><code class="language-bash">mvn --encrypt-password
</code></pre></div>
<p>A dialog will appear asking for the password, please use the personal access token value. This command produces an encrypted version of it, something like</p>

<div class="source"><pre class=" prettyprint linenums"><code>{COQLCE6DU6GtcS5P=}
</code></pre></div>
<p>Within your M2 Settings file <code>/home/runner/.m2/settings.xml</code> you will find a number of server elements like the following:</p>

<div class="source"><pre class=" prettyprint linenums"><code class="language-xml">&lt;server&gt;
  &lt;id&gt;github&lt;/id&gt;
  &lt;username&gt;pallasCI&lt;/username&gt;
  &lt;password&gt;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&lt;/password&gt;
&lt;/server&gt;
</code></pre></div>
<p>Replace all instances of <code>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</code> with the encrypted password you generated in the previous steps.</p></section></section></section>
      </div>
    </main>

  <footer class="page-footer font-small pt-4 bg-dark text-light">
    <div class="container-fluid text-md-left">
        <div class="row">
          <div id="ContactDetailsDiv" class="col-md-5 col-lg-4 col-xl-4 mx-auto mb-md-0">
            <h5 class="text-uppercase fw-bold">Contact</h5>
            <a id="bootstrapSkin.contact.emailLinkContact" mailto:${orgEmail} class=" my-0"><i id="bootstrapSkin.contact.emailLinkIcon" class=" bi-envelope px-1 px-1"></i>info@pallas.uk</a>
            <p id="bootstrapSkin.contact.mobileContact" class=" my-0"><i id="bootstrapSkin.contact.mobileIcon" class=" bi-phone px-1 px-1"></i>+44 7861 530488</p>
          </div>
          <div id="socialMediaDiv" class="col-md-5 col-lg-4 col-xl-4 mx-auto mb-md-0">
            <div>Get connected with us on social networks</div>
            <div>
            <a id="bootstrapSkin.facebook.groupIdLinkContact" https://www.facebook.com/groups/350073883439443 class=" p-1"><i id="bootstrapSkin.facebook.groupIdLinkIcon" class=" bi-facebook text-light px-1"></i></a>
            <a id="bootstrapSkin.twitter.accountIdLinkContact" https://twitter.com/PallasUK class=" p-1"><i id="bootstrapSkin.twitter.accountIdLinkIcon" class=" bi-twitter text-light px-1"></i></a>
            <a id="bootstrapSkin.gitHub.projectIdLinkContact" https://github.com/${gitHubOrg}/${gitHubRepo} class=" p-1"><i id="bootstrapSkin.gitHub.projectIdLinkIcon" class=" bi-github text-light px-1"></i></a>
            </div>
            <div id="copyrightDiv" class="pt-3">
              <p>&#169;
      2022
<a href="https://www.pallas.uk">Pallas Systems</a>
              </p>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../../js/jquery.slim.min.js"></script>
    <script src="../../js/bootstrap.min.js"></script>
    <script src="../../js/prettify.js"></script>

    <!-- Used to enable the code-prettify running on the view. -->
    <script>
        addEventListener('load', function(event) { PR.prettyPrint(); }, false);
    </script>
  </body>